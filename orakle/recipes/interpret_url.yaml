name: interpret_url
description: Download a webpage and adapt its content for a specific user profile
endpoint: /interpret_url
method: POST

required_skills:
  - WebUrlDownloader
  - HtmlTextParse
  - TextProcessor

parameters:
  - name: url
    type: string
    description: URL to download
  - name: profile
    type: string
    description: Target user profile (e.g. "Busy layman", "Five years old kid")

flow:
  - skill: WebUrlDownloader
    input: url
    output: web_content
  - skill: HtmlTextParse
    input:
      text: $web_content
    output: parsed_text
  - skill: TextProcessor
    input:
      prompt: "Please adapt the content and language of the following text according to these five instructions:
        1. The language and characteristics of the adapted text must be based in this user profile description: '{$user_profile}'.
        2. Generate the output text using an easily readable HTML layout.
        3. Don't return a full HTML page just a `div` element containing an appropriate title and the processed text.
        4. Don't introduce placeholder content.
        5. Enclose the adapted text in the described HTML layout inside a triple backtick block, as the Markdown standard defines for embedding multiline blocks of code. The text to adapt is: $parsed_text"
    output: result
